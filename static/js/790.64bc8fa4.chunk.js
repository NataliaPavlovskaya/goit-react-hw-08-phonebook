"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[790],{5750:function(t,e,n){n.d(e,{Z:function(){return c}});var a="Section_section__cpp-W",r="Section_title__9535J",s=n(3329);function c(t){var e=t.children,n=t.title;return(0,s.jsxs)("section",{className:a,children:[n?(0,s.jsx)("h2",{className:r,children:n}):null,e]})}},4790:function(t,e,n){n.r(e),n.d(e,{default:function(){return E}});var a=n(885),r=n(2791),s=n(9434),c=n(5861),o=n(7757),i=n.n(o),u=n(4569),l=n.n(u),d=n(4443),m=n(5357),p=n(6916),f=function(t){return t.contacts.item},h=function(t){return t.contacts.isLoading},_=function(t){return t.contacts.filter},x=(0,p.P1)([f,_],(function(t,e){return t.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())}))})),v=(0,p.P1)([f],(function(t){return function(e){return t.map((function(t){return t.name})).includes(e)}})),b=n(643),C=n(5750),j={TaskEditor:"ContactForm_TaskEditor__map6q",TaskEditor_label:"ContactForm_TaskEditor_label__c1Ze8",TaskEditor_input:"ContactForm_TaskEditor_input__8bhcL",TaskEditor_button:"ContactForm_TaskEditor_button__4bMKM"},k=n(3329);function g(){var t=(0,r.useState)(""),e=(0,a.Z)(t,2),n=e[0],o=e[1],u=(0,r.useState)(""),p=(0,a.Z)(u,2),f=p[0],h=p[1],_=(0,s.v9)(v),x=(0,s.I0)(),b=function(t){if(t.preventDefault(),_(n))return alert("".concat(n," is already in contacts"));x(function(t,e){return function(){var n=(0,c.Z)(i().mark((function n(a){var r,s,c;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={name:t,number:e},a(d.ZP.addContactsRequest()),(0,m.l)("\u0417\u0430\u043f\u0438\u0441\u044c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430"),n.prev=3,n.next=6,l().post("/contacts",r);case 6:s=n.sent,c=s.data,a(d.ZP.addContactsSuccess(c)),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(3),a(d.ZP.addContactsError(n.t0.massage)),(0,m.x)(n.t0.message);case 15:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(t){return n.apply(this,arguments)}}()}(n,f)),o(""),h("")};return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)("form",{className:j.form,onSubmit:function(t){return b(t)},children:[(0,k.jsx)("label",{id:"name",htmlFor:"name",children:"Name"}),(0,k.jsx)("input",{type:"text",name:"name",id:"name",value:n,onChange:function(t){return o(t.target.value)}}),(0,k.jsx)("label",{id:"phone",htmlFor:"phone",children:"Number"}),(0,k.jsx)("input",{className:j.input,type:"tel",name:"phone",id:"phone",value:f,onChange:function(t){return h(t.target.value)}}),(0,k.jsx)("button",{type:"submit",disabled:!(n&&f),children:"add contact"})]})})}var y={TaskList:"ContactList_TaskList__ASd5b",TaskList_item:"ContactList_TaskList_item__pjGNc",completed:"ContactList_completed__lxu0h",TaskList_text:"ContactList_TaskList_text__YPKCU",TaskList_actions:"ContactList_TaskList_actions__AyR6L",TaskList_button:"ContactList_TaskList_button__friUZ"},N=n(6355);function Z(t){var e=t.onOpenModal,n=(0,s.v9)(x),a=(0,s.I0)();return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("ul",{children:n.map((function(t){var n=t.id,r=t.name,s=t.number;return(0,k.jsxs)("li",{className:y.item,children:[(0,k.jsxs)("p",{className:y.nameText,children:[r,": ",(0,k.jsx)("span",{children:s})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("button",{className:y.button,type:"button",onClick:function(){return e({name:r,number:s},n)},children:(0,k.jsx)(N.dfI,{size:"20"})}),(0,k.jsx)("button",{className:y.button,type:"button",onClick:function(){return a(function(t){return function(){var e=(0,c.Z)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(d.ZP.deleteContactsRequest()),e.prev=1,e.next=4,l().delete("/contacts/".concat(t));case 4:n(d.ZP.deleteContactsSuccess(t)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),n(d.ZP.deleteContactsError(e.t0.massage)),(0,m.x)(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()}(n))},children:(0,k.jsx)(N.AMf,{size:"20",className:y.delete})})]})]},n)}))})})}function L(){var t=(0,s.v9)(_),e=(0,s.I0)();return(0,k.jsx)("form",{className:"form",children:(0,k.jsxs)("div",{className:"inputWrapper",children:[(0,k.jsx)("label",{className:"label",name:"filter",htmlFor:"filter",value:t}),(0,k.jsx)("input",{style:{marginBottom:"30px"},className:"input",value:t,type:"text",id:"filter",placeholder:"\u043d\u0430\u0439\u0442\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442 \u043f\u043e \u0438\u043c\u0435\u043d\u0438",onChange:function(t){return e(d.ZP.changeFilter(t.target.value))}})]})})}var w={overlay:"ContactModal_overlay__DO7fi",modal:"ContactModal_modal__SinjB",controls:"ContactModal_controls__B-Ek7",close:"ContactModal_close__eyPHt",closeIcon:"ContactModal_closeIcon__FZeEg"};function T(t){var e=t.contactData,n=t.onCloseModal,o=e.contact,u=e.id,p=(0,r.useState)(""),f=(0,a.Z)(p,2),h=f[0],_=f[1],x=(0,r.useState)(""),v=(0,a.Z)(x,2),b=v[0],C=v[1],j=(0,s.I0)();(0,r.useEffect)((function(){var t=function(t){"Escape"===t.code&&n(!1)};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}));return(0,k.jsx)("div",{className:w.overlay,onClick:function(t){return function(t){t.currentTarget===t.target&&n()}(t)},children:(0,k.jsxs)("div",{className:w.modal,children:[(0,k.jsx)("button",{className:w.close,type:"button",onClick:function(){return n(!1)},children:(0,k.jsx)(N.ZyS,{size:"30",className:w.closeIcon})}),(0,k.jsxs)("form",{className:w.form,children:[(0,k.jsxs)("div",{className:"inputWrapper",children:[(0,k.jsx)("label",{htmlFor:"editName"}),(0,k.jsx)("input",{className:"input",type:"text",name:"name",id:"editName",value:h,placeholder:o.name,onChange:function(t){var e=t.target.value;return _(e)}})]}),(0,k.jsxs)("div",{className:"inputWrapper",children:[(0,k.jsx)("label",{htmlFor:"editNumber"}),(0,k.jsx)("input",{className:"input",type:"tel",name:"number",id:"editNamber",value:b,placeholder:o.number,onChange:function(t){var e=t.target.value;return C(e)}})]}),(0,k.jsx)("button",{className:"button",type:"button",onClick:function(){var t={name:h||o.name,number:b||o.number};j(function(t,e){return function(){var n=(0,c.Z)(i().mark((function n(a){var r,s;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(d.ZP.editContactsRequest()),n.prev=1,n.next=4,l().patch("/contacts/".concat(t),e);case 4:r=n.sent,s=r.data,console.log(s),a(d.ZP.editContactsSuccess(s)),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),a(d.ZP.editContactsError(n.t0.massage)),(0,m.x)(n.t0.message);case 14:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(t){return n.apply(this,arguments)}}()}(u,t)),n(!1)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})}function E(){var t=(0,s.v9)(f),e=(0,s.v9)(h),n=(0,s.I0)(),o=(0,r.useState)(!1),u=(0,a.Z)(o,2),p=u[0],_=u[1],x=(0,r.useState)({}),v=(0,a.Z)(x,2),j=v[0],y=v[1];return(0,r.useEffect)((function(){n(function(){var t=(0,c.Z)(i().mark((function t(e){var n,a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(d.ZP.fetchContactsRequest()),t.prev=1,t.next=4,l().get("/contacts");case 4:n=t.sent,a=n.data,e(d.ZP.fetchContactsSuccess(a)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),e(d.ZP.fetchContactsError(t.t0.massage)),(0,m.x)(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}())}),[n]),(0,k.jsxs)(C.Z,{title:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u0438 \u043d\u043e\u043c\u0435\u0440",children:[(0,k.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:e?(0,k.jsx)(b.iT,{height:40,width:40,color:"#4fa94d",wrapperStyle:{},wrapperClass:"",visible:!0,ariaLabel:"oval-loading",secondaryColor:"#4fa94d",strokeWidth:2,strokeWidthSecondary:2}):null}),(0,k.jsx)(g,{}),t.length?(0,k.jsxs)(C.Z,{title:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b",children:[(0,k.jsx)(L,{}),(0,k.jsx)(Z,{onOpenModal:function(t,e){_(!0),y({contact:t,id:e})}}),p&&(0,k.jsx)(T,{onCloseModal:_,contactData:j})]}):null]})}}}]);
//# sourceMappingURL=790.64bc8fa4.chunk.js.map