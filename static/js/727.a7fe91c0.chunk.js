"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[727],{5750:function(e,t,n){n.d(t,{Z:function(){return c}});var a="Section_section__cpp-W",r="Section_title__9535J",s=n(3329);function c(e){var t=e.children,n=e.title;return(0,s.jsxs)("section",{className:a,children:[n?(0,s.jsx)("h2",{className:r,children:n}):null,t]})}},8727:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var a=n(885),r=n(2791),s=n(9434),c=n(5861),o=n(7757),l=n.n(o),u=n(4569),i=n.n(u),d=n(4443),m=n(5357),f=n(6916),p=function(e){return e.contacts.item},h=function(e){return e.contacts.isLoading},x=function(e){return e.contacts.filter},v=(0,f.P1)([p,x],(function(e,t){return e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))})),b=(0,f.P1)([p],(function(e){return function(t){return e.map((function(e){return e.name})).includes(t)}})),j=n(643),C=n(5750),_=n(3329);function g(){var e=(0,r.useState)(""),t=(0,a.Z)(e,2),n=t[0],o=t[1],u=(0,r.useState)(""),f=(0,a.Z)(u,2),p=f[0],h=f[1],x=(0,s.v9)(b),v=(0,s.I0)(),j=function(e){if(e.preventDefault(),x(n))return alert("".concat(n," is already in contacts"));v(function(e,t){return function(){var n=(0,c.Z)(l().mark((function n(a){var r,s,c;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={name:e,number:t},a(d.ZP.addContactsRequest()),(0,m.l)("\u0417\u0430\u043f\u0438\u0441\u044c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430"),n.prev=3,n.next=6,i().post("/contacts",r);case 6:s=n.sent,c=s.data,a(d.ZP.addContactsSuccess(c)),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(3),a(d.ZP.addContactsError(n.t0.massage)),(0,m.x)(n.t0.message);case 15:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(e){return n.apply(this,arguments)}}()}(n,p)),o(""),h("")};return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("form",{className:"form",onSubmit:function(e){return j(e)},children:[(0,_.jsxs)("div",{className:"inputWrapper",children:[(0,_.jsx)("input",{className:"input",type:"text",name:"name",id:"name",value:n,placeholder:"\u0438\u043c\u044f",onChange:function(e){return o(e.target.value)}}),(0,_.jsx)("label",{className:n?"labelRight":"label",htmlFor:"name"})]}),(0,_.jsxs)("div",{className:"inputWrapper",children:[(0,_.jsx)("label",{className:p?"labelRight":"label",htmlFor:"phone"}),(0,_.jsx)("input",{className:"input",type:"tel",name:"number",id:"number",value:p,placeholder:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",onChange:function(e){return h(e.target.value)}})]}),(0,_.jsx)("button",{className:"button",type:"submit",disabled:!(n&&p),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})})}var N=n(6355),y={item:"ContactList_item__EZYHO",nameText:"ContactList_nameText__nu9fJ",button:"ContactList_button__7kL4l"};function Z(e){var t=e.onOpenModal,n=(0,s.v9)(v),a=(0,s.I0)();return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("ul",{children:n.map((function(e){var n=e.id,r=e.name,s=e.number;return(0,_.jsxs)("li",{className:y.item,children:[(0,_.jsxs)("p",{className:y.nameText,children:[r,": ",(0,_.jsx)("span",{children:s})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("button",{className:y.button,type:"button",onClick:function(){return t({name:r,number:s},n)},children:(0,_.jsx)(N.dfI,{size:"20"})}),(0,_.jsx)("button",{className:y.button,type:"button",onClick:function(){return a(function(e){return function(){var t=(0,c.Z)(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(d.ZP.deleteContactsRequest()),t.prev=1,t.next=4,i().delete("/contacts/".concat(e));case 4:n(d.ZP.deleteContactsSuccess(e)),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),n(d.ZP.deleteContactsError(t.t0.massage)),(0,m.x)(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}(n))},children:(0,_.jsx)(N.AMf,{size:"20",className:y.delete})})]})]},n)}))})})}function k(){var e=(0,s.v9)(x),t=(0,s.I0)();return(0,_.jsx)("form",{className:"form",children:(0,_.jsxs)("div",{className:"inputWrapper",children:[(0,_.jsx)("label",{className:"label",name:"filter",htmlFor:"filter",value:e}),(0,_.jsx)("input",{style:{marginBottom:"30px"},className:"input",value:e,type:"text",id:"filter",placeholder:"find a contact by name",onChange:function(e){return t(d.ZP.changeFilter(e.target.value))}})]})})}var w={overlay:"ContactModal_overlay__DO7fi",modal:"ContactModal_modal__SinjB",controls:"ContactModal_controls__B-Ek7",close:"ContactModal_close__eyPHt",closeIcon:"ContactModal_closeIcon__FZeEg"};function S(e){var t=e.contactData,n=e.onCloseModal,o=t.contact,u=t.id,f=(0,r.useState)(""),p=(0,a.Z)(f,2),h=p[0],x=p[1],v=(0,r.useState)(""),b=(0,a.Z)(v,2),j=b[0],C=b[1],g=(0,s.I0)();(0,r.useEffect)((function(){var e=function(e){"Escape"===e.code&&n(!1)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}));return(0,_.jsx)("div",{className:w.overlay,onClick:function(e){return function(e){e.currentTarget===e.target&&n()}(e)},children:(0,_.jsxs)("div",{className:w.modal,children:[(0,_.jsx)("button",{className:w.close,type:"button",onClick:function(){return n(!1)},children:(0,_.jsx)(N.ZyS,{size:"30",className:w.closeIcon})}),(0,_.jsxs)("form",{className:w.form,children:[(0,_.jsxs)("div",{className:"inputWrapper",children:[(0,_.jsx)("label",{htmlFor:"editName"}),(0,_.jsx)("input",{className:"input",type:"text",name:"name",id:"editName",value:h,placeholder:o.name,onChange:function(e){var t=e.target.value;return x(t)}})]}),(0,_.jsxs)("div",{className:"inputWrapper",children:[(0,_.jsx)("label",{htmlFor:"editNumber"}),(0,_.jsx)("input",{className:"input",type:"tel",name:"number",id:"editNamber",value:j,placeholder:o.number,onChange:function(e){var t=e.target.value;return C(t)}})]}),(0,_.jsx)("button",{className:"button",type:"button",onClick:function(){var e={name:h||o.name,number:j||o.number};g(function(e,t){return function(){var n=(0,c.Z)(l().mark((function n(a){var r,s;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(d.ZP.editContactsRequest()),n.prev=1,n.next=4,i().patch("/contacts/".concat(e),t);case 4:r=n.sent,s=r.data,console.log(s),a(d.ZP.editContactsSuccess(s)),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),a(d.ZP.editContactsError(n.t0.massage)),(0,m.x)(n.t0.message);case 14:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}()}(u,e)),n(!1)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})}function P(){var e=(0,s.v9)(p),t=(0,s.v9)(h),n=(0,s.I0)(),o=(0,r.useState)(!1),u=(0,a.Z)(o,2),f=u[0],x=u[1],v=(0,r.useState)({}),b=(0,a.Z)(v,2),N=b[0],y=b[1];return(0,r.useEffect)((function(){n(function(){var e=(0,c.Z)(l().mark((function e(t){var n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(d.ZP.fetchContactsRequest()),e.prev=1,e.next=4,i().get("/contacts");case 4:n=e.sent,a=n.data,t(d.ZP.fetchContactsSuccess(a)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t(d.ZP.fetchContactsError(e.t0.massage)),(0,m.x)(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}),[n]),(0,_.jsxs)(C.Z,{title:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u0438 \u043d\u043e\u043c\u0435\u0440",children:[(0,_.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:t?(0,_.jsx)(j.iT,{height:40,width:40,color:"#4fa94d",wrapperStyle:{},wrapperClass:"",visible:!0,ariaLabel:"oval-loading",secondaryColor:"#4fa94d",strokeWidth:2,strokeWidthSecondary:2}):null}),(0,_.jsx)(g,{}),e.length?(0,_.jsxs)(C.Z,{title:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b",children:[(0,_.jsx)(k,{}),(0,_.jsx)(Z,{onOpenModal:function(e,t){x(!0),y({contact:e,id:t})}}),f&&(0,_.jsx)(S,{onCloseModal:x,contactData:N})]}):null]})}}}]);
//# sourceMappingURL=727.a7fe91c0.chunk.js.map